{% load static %}

<!-- ðŸŸ  Sticky Navigation Bar -->
<nav class="sticky top-0 z-50 bg-orange-500 h-[60px] w-full text-white shadow-md">

  <!-- ðŸ”§ Navbar Container -->
  <div class="max-w-[1440px] mx-auto px-[60px] h-full flex items-center justify-between">

    <!-- ðŸ”¶ Logo -->
    <a href="{% url 'home' %}">
      <img src="{% static 'images/logo.png' %}" alt="Kinbo Logo" class="h-8 w-auto">
    </a>

    <!-- ðŸ’» Right Side (Desktop Only) -->
    <div class="hidden lg:flex items-center space-x-6">
      <!-- Cart -->
      <a href="{% url 'cart' %}" class="hover:underline">
        <img src="{% static 'images/cart.png' %}" alt="Cart" class="h-5 w-5">
      </a>

      <!-- Sign In -->
      <a href="{% url 'login' %}" class="text-sm hover:underline flex items-center space-x-1">
        <img src="{% static 'images/signin.png' %}" alt="Sign In" class="h-5 w-5">
        <span>Sign In</span>
      </a>
    </div>

    <!-- ðŸ“± Mobile Hamburger Toggle (Only the toggle) -->
    <div class="lg:hidden flex items-center">
      <button id="menu-toggle" class="focus:outline-none relative z-50">
        <!-- â˜° Icon -->
        <svg id="hamburger-icon" class="w-6 h-6 transition-all duration-200" fill="none" stroke="currentColor"
             stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round"
                d="M4 6h16M4 12h16M4 18h16" />
        </svg>
        <!-- âœ– Icon -->
        <svg id="close-icon" class="w-6 h-6 hidden transition-all duration-200" fill="none" stroke="currentColor"
             stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round"
                d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
  </div>

  <!-- ðŸ” Centered Search Bar (Desktop Only) -->
  <form action="{% url 'search' %}" method="GET"
        class="hidden lg:flex absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-xl px-4">
    <div class="relative w-full flex items-center">
      <!-- Search Icon -->
      <img src="{% static 'images/search.png' %}" alt="Search"
           class="h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2">
      <input type="text" name="q" placeholder="Search for any product or brand"
             class="w-full rounded-l-full py-2 pl-10 pr-4 text-sm text-gray-800 placeholder-gray-400 focus:outline-none">
    </div>
    <!-- Button -->
    <button type="submit"
            class="bg-orange-600 hover:bg-orange-700 text-white px-4 rounded-r-full text-sm flex items-center justify-center">
      <img src="{% static 'images/searchbutton.png' %}" alt="Search" class="h-5 w-5">
    </button>
  </form>

  <!-- ðŸ“± Mobile Dropdown Menu -->
  <div id="mobile-menu"
       class="lg:hidden origin-top transform scale-y-0 opacity-0 transition-all duration-300 ease-out bg-orange-500 px-[60px] py-4 space-y-6 border-t border-orange-600">

    <!-- ðŸ” Mobile Search Bar -->
    <form action="{% url 'search' %}" method="GET" class="flex w-full">
      <div class="relative w-full flex items-center">
        <img src="{% static 'images/search.png' %}" alt="Search"
             class="h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2">
        <input type="text" name="q" placeholder="Search"
               class="w-full rounded-l-full py-2 pl-10 pr-4 text-sm text-gray-800 placeholder-gray-400 focus:outline-none">
      </div>
      <button type="submit"
              class="bg-orange-600 hover:bg-orange-700 text-white px-4 rounded-r-full text-sm flex items-center justify-center">
        <img src="{% static 'images/searchbutton.png' %}" alt="Search" class="h-5 w-5">
      </button>
    </form>

    <!-- ðŸ”¸ Mobile Vertical Buttons -->
    <div class="flex flex-col space-y-4">
      <a href="{% url 'cart' %}"
         class="text-orange-600 bg-white hover:bg-orange-100 font-semibold py-2 rounded text-center transition">
        Cart
      </a>
      <a href="{% url 'login' %}"
         class="text-orange-600 bg-white hover:bg-orange-100 font-semibold py-2 rounded text-center transition">
        Sign In
      </a>
    </div>
  </div>
</nav>

<!-- ðŸ”§ Toggle Script -->
<script>
  const toggleBtn = document.getElementById('menu-toggle');
  const menu = document.getElementById('mobile-menu');
  const hamburgerIcon = document.getElementById('hamburger-icon');
  const closeIcon = document.getElementById('close-icon');

  toggleBtn.addEventListener('click', () => {
    const isOpen = !menu.classList.contains('scale-y-100');

    if (isOpen) {
      menu.classList.remove('scale-y-0', 'opacity-0');
      menu.classList.add('scale-y-100', 'opacity-100');
      hamburgerIcon.classList.add('hidden');
      closeIcon.classList.remove('hidden');
    } else {
      menu.classList.add('scale-y-0', 'opacity-0');
      menu.classList.remove('scale-y-100', 'opacity-100');
      hamburgerIcon.classList.remove('hidden');
      closeIcon.classList.add('hidden');
    }
  });

  document.addEventListener('click', (event) => {
    const isClickInside = menu.contains(event.target) || toggleBtn.contains(event.target);
    if (!isClickInside) {
      menu.classList.add('scale-y-0', 'opacity-0');
      menu.classList.remove('scale-y-100', 'opacity-100');
      hamburgerIcon.classList.remove('hidden');
      closeIcon.classList.add('hidden');
    }
  });
</script>
